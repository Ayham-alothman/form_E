<div class="bg-gray-50 min-h-screen flex flex-col">
    <div class="h-24 bg-green flex items-center justify-center flex-shrink-0">
        <img class="h-20" src="assets/images/13.webp" alt="Company Logo">
    </div>

    <div class="flex-1 max-w-7xl mx-auto px-4 py-6 w-full">
        <!-- ===== Categories Navigation ===== -->
        <div class="bg-white rounded-2xl shadow-sm p-6 mb-6">
            <div class="flex flex-col md:flex-row md:items-center md:justify-between gap-4 mb-6">
                <h2 class="text-2xl font-bold text-gold">
                    تصنيفات الشواغر
                </h2>
                <span class="text-sm text-white bg-gold px-3 py-1 rounded-full">
                    {{ total_vacancies }}  عدد الشواغر الكلي
                </span>
            </div>

            <div class="flex flex-wrap gap-3 text-green" role="tablist" aria-label="تصنيفات الشواغر">
                @for (cat of categories; track cat.id) {
                    <button type="button" (click)="selectCategory(cat.id)" role="tab"
                        [attr.aria-selected]="cat.id === selectedCategoryId"
                        class="bg-green hover:bg-gold text-white flex items-center gap-2 px-4 py-2 rounded-full text-sm font-medium transition-all duration-200"
                        [ngClass]="{
                            'bg-primary text-white shadow-md': cat.id === selectedCategoryId,
                            'bg-gray-100 text-gray-700 hover:bg-gray-200': cat.id !== selectedCategoryId
                        }">
                        <span>{{ cat.name }}</span>
                        <span class="text-xs bg-white/20 px-2 py-0.5 rounded-full">
                            {{ cat.vacancies_count }}
                        </span>
                    </button>
                }
            </div>

            <div class="mt-4 text-sm text-green">
                اختر التصنيف لعرض الشواغر المتاحة ضمنه.
            </div>
        </div>

        <!-- ===== Vacancies List ===== -->
        <div class="space-y-6 text-green">
            @if (filteredVacancies.length === 0) {
                <div class="text-center py-12 bg-white rounded-2xl shadow-sm text-gray-500">
                    لا توجد شواغر ضمن هذا التصنيف حالياً.
                </div>
            } @else {
                @for (job of filteredVacancies; track job.id) {
                    <div class="bg-white rounded-2xl shadow-sm overflow-hidden hover:shadow-md transition duration-300">
                        <div class="flex flex-col lg:flex-row">
                            <!-- Image -->
                            <div class="lg:w-1/3 h-64 lg:h-auto bg-cover bg-center relative overflow-hidden"
                                [style.backgroundImage]="'url(' + (job.image || '/img/decision.webp') + ')'"
                                role="img" [attr.aria-label]="job.title">
                                <img class="w-full h-full object-cover" src="assets/images/10.jpg" alt="Company Logo">
                            </div>

                            <!-- Content -->
                            <div class="lg:w-2/3 p-6">
                                <h3 class="text-xl font-bold text-gold mb-3">
                                    {{ job.name }}
                                </h3>

<!--                                <p class="text-gray-600 mb-4 leading-relaxed">-->
<!--                                    {{ job.certificate }}-->
<!--                                </p>-->

<!--                                <p class="text-gray-600 mb-4 leading-relaxed">-->
<!--                                    {{ job.description }}-->
<!--                                </p>-->

<!--                                <p class="text-gray-600 mb-4 leading-relaxed">-->
<!--                                    {{ job.number_of_years_experience }}-->
<!--                                </p>-->

<!--                                <p class="text-gray-600 mb-4 leading-relaxed">-->
<!--                                    {{ job.previous_experience }}-->
<!--                                </p>-->

                                <div class="mb-6">
                                    <h4 class="font-semibold text-gold mb-3">
                                        الكفاءات والمهارات
                                    </h4>
                                    <!-- FIXED: Changed from {{job.skills}} to loop through skills array -->
                                    <div class="flex flex-wrap gap-2">
                                        @for (skill of job.skills; track skill.id) {
                                            <span class="bg-gray-100 text-gray-700 px-3 py-1 rounded-full text-sm">
                                                {{ skill.name }}
                                            </span>
                                        }
                                    </div>
                                </div>

                                <div class="flex justify-end">
                                    <a   routerLink="/recruitment/{{job.id}}"
                                        class=" bg-green hover:bg-gold inline-flex items-center px-6 py-3 bg-primary text-white rounded-xl font-medium hover:bg-primary/90 transition duration-200">
                                        قدّم الآن
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                }
            }
        </div>
    </div>

    <!-- Footer with no extra spacing -->
    <div class="bg-green flex-shrink-0">
        <div class="max-w-7xl mx-auto flex flex-col sm:flex-row items-center justify-between px-6 py-4">

            <!-- Logo -->
            <img class="h-16 sm:h-20 w-auto"
                 src="assets/images/13.webp"
                 alt="وزارة الطاقة">

            <!-- Text -->
            <p class="text-white text-sm sm:text-base text-center sm:text-left mt-3 sm:mt-0">
                © وزارة الطاقة | الجمهورية العربية السورية جميع الحقوق محفوظة 2026
            </p>

        </div>
    </div>
</div>